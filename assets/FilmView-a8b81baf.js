import{_ as U,w as j,v as q,o as l,c as u,a as t,F as C,r as P,t as r,n as G,p as Y,b as J,d as f,e as F,f as w,g as c,h as g,i as I,j as B,u as O,k as M,l as D,m as h,q as T,s as Q,x as W,y as X,z as Z,S as ee}from"./index-71a5951d.js";const te=a=>(Y("data-v-1efa4228"),a=a(),J(),a),ae=te(()=>t("div",{class:"v-card-subtitle pl-0"},"Choose seat",-1)),se={class:"rows"},le={class:"row"},oe=["onClick"],ne={__name:"Places",props:{data:Array},emits:["selected"],setup(a,{emit:s}){const o=(y,d)=>s("selected",{seat:y,row:d});return(y,d)=>j((l(),u("div",null,[ae,t("div",se,[(l(!0),u(C,null,P(a.data,(m,_)=>(l(),u("div",{class:"d-flex",key:_},[t("div",le,r(m[0].row),1),(l(!0),u(C,null,P(m[1],({seat:e,is_free:i},b)=>(l(),u("div",{class:G(["cell",{free:i}]),key:b,onClick:x=>o(e,m[0].row)},r(e),11,oe))),128))]))),128))])],512)),[[q,a.data]])}},ce=U(ne,[["__scopeId","data-v-1efa4228"]]),ie={class:"v-card-subtitle pl-0"},A={__name:"ChipGroup",props:{items:Array,title:String,hasKey:String},emits:["changed"],setup(a,{emit:s}){const o=f("");return F(o,()=>{s("changed",o.value)}),(y,d)=>{const m=w("v-chip"),_=w("v-chip-group");return l(),u(C,null,[t("div",ie,r(a.title),1),c(_,{modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=e=>o.value=e),"selected-class":"text-deep-purple-accent-4"},{default:g(()=>[(l(!0),u(C,null,P(a.items,(e,i)=>(l(),I(m,{key:i,value:e[a.hasKey]||e},{default:g(()=>[B(r(e[a.hasKey]||e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],64)}}};const re={key:0,class:"d-flex pa-2"},ue={class:"ml-5"},de={class:"v-card-title pl-0"},_e=["innerHTML"],ve=t("div",{class:"v-card-subtitle pl-0"},"Description",-1),pe=["innerHTML"],me=t("div",{class:"text-subtitle-1 pb-2"},"You have successfully booked your seat!",-1),he={__name:"FilmInfo",async setup(a){let s,o;const y=O();let d=f(null),m=f(null);const _=y.params.id,e=f(""),i=f(""),b=f(null),x=f(!1),k=f(null);d.value=([s,o]=M(()=>Q({movie_id:_})),s=await s,o(),s),m.value=([s,o]=M(()=>W(_)),s=await s,o(),s);const V=D(()=>d.value.data[0]),$=D(()=>m.value.data[_]),N=D(()=>{var S;return((S=[...$.value].filter(({showdate:n})=>n===e.value).map(({daytime:n})=>n)[0])==null?void 0:S.split(";"))||null}),H=v=>{e.value=v,i.value=null},K=v=>{i.value=v};F(e,()=>{i.value=null}),F(i,async v=>{if(v){const p=await Z(_,e.value,i.value);b.value=p.data}else b.value=null});const z=async({seat:v,row:p})=>{const S={movie_id:+_,row:p,seat:v,showdate:e.value,daytime:i.value};try{const n=await X(S);x.value=!0,k.value=n.data}catch(n){throw new Error(n)}};return(v,p)=>{const S=w("v-img"),n=w("v-divider"),E=w("v-btn"),R=w("v-snackbar");return h(d)?(l(),u("div",re,[t("div",null,[c(S,{width:233,"aspect-ratio":"4/3",cover:"",src:h(V).image},null,8,["src"])]),t("div",ue,[t("div",de,r(h(V).name),1),c(n,{color:"info",class:"my-5"}),t("div",{class:"properties",innerHTML:h(V).additional},null,8,_e),c(n,{color:"info",class:"my-5"}),ve,t("div",{innerHTML:h(V).description},null,8,pe),c(n,{color:"info",class:"my-5"}),h($)?(l(),u(C,{key:0},[c(A,{items:h($),onChanged:H,"has-key":"showdate",title:"Available sessions dates"},null,8,["items"]),e.value?(l(),I(A,{items:h(N),key:e.value,onChanged:K,title:"Available sessions times"},null,8,["items"])):T("",!0),c(ce,{data:b.value,onSelected:z},null,8,["data"]),c(R,{modelValue:x.value,"onUpdate:modelValue":p[1]||(p[1]=L=>x.value=L),vertical:"",color:"success",location:"top"},{actions:g(()=>[c(E,{color:"purple",variant:"flat",onClick:p[0]||(p[0]=L=>x.value=!1)},{default:g(()=>[B(" Close ")]),_:1})]),default:g(()=>[me,t("p",null,"Row - "+r(k.value.row),1),t("p",null,"Seat - "+r(k.value.seat),1),t("p",null,"Date - "+r(k.value.showdate),1),t("p",null,"Time - "+r(k.value.daytime),1),t("p",null,"Ticket - "+r(k.value.ticketkey),1)]),_:1},8,["modelValue"])],64)):T("",!0)])])):T("",!0)}}},fe={class:"wrapper"},we={__name:"FilmView",setup(a){return(s,o)=>{const y=w("v-progress-linear");return l(),u("main",null,[t("div",fe,[(l(),I(ee,null,{fallback:g(()=>[c(y,{indeterminate:""})]),default:g(()=>[c(he)]),_:1}))])])}}};export{we as default};
